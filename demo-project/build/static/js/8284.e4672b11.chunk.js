"use strict";(self.webpackChunkdemo_project=self.webpackChunkdemo_project||[]).push([[8284],{8882:(e,s,a)=>{a.d(s,{Mt:()=>h,Oz:()=>n,UP:()=>c,Vu:()=>r,ku:()=>x,lO:()=>p,lj:()=>m,md:()=>i,wI:()=>o,x8:()=>u});var t=a(6183),l=a(2843),d=a(1036);const n=()=>async e=>{e({type:t.jL});try{const{data:s}=await l.A.get("/chat/myChat");e((d=s.chats,{type:t.$e,payload:d}))}catch(n){var s,a;e((e=>({type:t.YS,payload:e}))((null===(s=n.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||n.message))}var d},r=e=>{let{id:s,populate:a=!1}=e;return async e=>{e({type:t.pE});try{let d=`/chat/${s}`;a&&(d+="?populate=true");const{data:n}=await l.A.get(d);e({type:t.z4,payload:n})}catch(d){e({type:t._7,payload:d.response?d.response.data.message:d.message})}}},i=e=>async s=>{try{s({type:t.NV});const a={headers:{"Content-Type":"multipart/form-data"}},{data:n}=await l.A.post("/chat/send-attachment",e,a);s({type:t.NA,payload:n.message}),d.oR.success("Attachment sent successfully")}catch(a){s({type:t.kx,payload:a.response.data.message||a.message}),d.oR.error(a.response.data.message||"Failed to send attachment")}},c=e=>async s=>{s({type:t.ii});try{const{data:a}=await l.A.put("user/sendrequest",{userId:e});s({type:t.Ct,payload:a.message})}catch(n){var a,d;s({type:t.ni,payload:(null===(a=n.response)||void 0===a||null===(d=a.data)||void 0===d?void 0:d.message)||n.message})}},o=(e,s)=>async a=>{a({type:t.Es});try{const{data:d}=await l.A.put("user/acceptrequest",{requestId:e,accept:s});a({type:t.qg,payload:d})}catch(r){var d,n;a({type:t.Ny,payload:(null===(d=r.response)||void 0===d||null===(n=d.data)||void 0===n?void 0:n.message)||r.message})}},m=(e,s)=>async a=>{try{a({type:t.wK});const{data:d}=await l.A.get(`/chat/message/${e}`,{page:s});a({type:t.GS,payload:d})}catch(d){a({type:t.Tv,payload:d.response.data.message})}},x=(e,s)=>({type:t.qS,payload:{chatId:e,message:s}}),h=e=>({type:t.kn,payload:{chatId:e}}),p=()=>async e=>{try{e({type:t.B6});const s=await l.A.get("/chat/mygroup"),{groups:a}=s.data;e({type:t.Hc,payload:a})}catch(d){var s,a;e({type:t.EQ,payload:(null===(s=d.response)||void 0===s||null===(a=s.data)||void 0===a?void 0:a.message)||d.message})}},u=()=>e=>{e({type:t.Il})}},8284:(e,s,a)=>{a.r(s),a.d(s,{default:()=>$});var t=a(5043),l=a(3003),d=a(423),n=a(5475),r=a(579);const i=e=>{let{id:s,name:a,title:l,imageUrl:d,latestText:i,createAt:c,isActive:o,count:m}=e;const x=o?"conversation active":"conversation";return(0,r.jsx)(t.Fragment,{children:(0,r.jsx)(n.N_,{to:`/chat/${s}`,id:"conversation-item",children:(0,r.jsx)("div",{className:x,children:(0,r.jsxs)("div",{className:"align-items-center d-flex gap-2",children:[(0,r.jsx)("div",{children:(0,r.jsx)("img",{src:d,alt:a,width:"50",height:"50",className:"rounded rounded-5 border"})}),(0,r.jsxs)("div",{className:"mt-3",children:[(0,r.jsx)("h6",{className:"fs-6 fw-semibold",style:{marginBottom:"-2px"},children:a}),(0,r.jsx)("span",{className:"badge rounded-pill bg-dark-subtle text-secondary fw-light p-0",children:l}),(0,r.jsx)("p",{className:"text-small text-success fw-semibold",children:m>0?`New Message ${m}`:"No new messages"})]})]})})})})};var c=a(3216);const o=e=>{let{chats:s}=e;const{id:a}=(0,c.g)(),[d,n]=(0,t.useState)(0),o=(0,l.d4)((e=>{var s;return(null===(s=e.messageAlerts[a])||void 0===s?void 0:s.count)||0}));(0,t.useEffect)((()=>{const e=s.findIndex((e=>e._id===a));-1!==e&&n(e)}),[a,s]);return(0,r.jsx)("div",{children:s.map(((e,s)=>(0,r.jsx)(i,{id:e._id,name:e.name,title:e.groupChat?"Group Chat":"Single Chat",imageUrl:e.avatar,latestText:e.latestText||"No recent messages",createAt:e.createAt||"Just now",onConversationItemSelected:()=>(e=>{n(e)})(s),isActive:s===d,count:o},e._id)))})};var m=a(6178),x=a.n(m),h=a(8882),p=a(921);const u=()=>{const e=(0,l.wA)(),{notifications:s,loading:a,error:t}=(0,l.d4)((e=>e.notification));if(a)return(0,r.jsx)("div",{children:"Loading..."});if(t)return(0,r.jsx)("div",{children:"Error loading notifications"});return(0,r.jsx)("div",{className:"modal-dialog modal-dialog-centered",style:{width:"600px"},children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"d-flex p-2 justify-content-between border-bottom",children:[(0,r.jsx)("h3",{className:"fs-5 ms-2",id:"exampleModalLabel",children:"Requests"}),(0,r.jsx)("button",{type:"button",className:"btn-close btn-sm me-2","data-bs-dismiss":"modal","aria-label":"Close"})]}),(0,r.jsx)("div",{className:"modal-body",children:null!==s&&void 0!==s&&s.length?s.map((s=>{var a,l,d;return(0,r.jsxs)("div",{className:"d-flex mb-3",children:[(0,r.jsx)("img",{src:(null===s||void 0===s||null===(a=s.sender)||void 0===a?void 0:a.avatar)||"https://i.pinimg.com/736x/07/c9/f4/07c9f488cb6381d020a8397fe112c2cc.jpg",alt:null===s||void 0===s||null===(l=s.sender)||void 0===l?void 0:l.name,width:"50px",height:"50px",className:"rounded-circle border"}),(0,r.jsxs)("div",{className:"ms-3",children:[(0,r.jsxs)("span",{children:[null===s||void 0===s||null===(d=s.sender)||void 0===d?void 0:d.name," sent you a ",(0,r.jsx)("strong",{children:"friend request"})]})," ",(0,r.jsx)("br",{}),(0,r.jsx)("span",{className:"text-muted",children:x()(null===s||void 0===s?void 0:s.createdAt).fromNow()}),(0,r.jsxs)("div",{className:"text-center mt-2",children:[(0,r.jsx)("button",{className:"btn btn-outline-danger btn-sm me-2",onClick:()=>(async s=>{try{await e((0,h.wI)(s,!1)),e((0,p.bb)())}catch(t){}})(s._id),children:"Reject"}),(0,r.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:()=>(async s=>{try{await e((0,h.wI)(s,!0)),e((0,p.bb)())}catch(t){}})(s._id),children:"Accept"})]})]})]},s._id)})):(0,r.jsx)("p",{children:"No notifications"})}),(null===s||void 0===s?void 0:s.length)>0&&(0,r.jsx)("div",{className:"text-center border-top pt-2",children:(0,r.jsx)("button",{type:"button",className:"btn btn-link",onClick:()=>{},children:"Clear All"})})]})})};var j=a(6720),b=a(5051);const v=e=>{let{onClose:s,onInvite:a}=e;const[l,d]=(0,t.useState)(""),[n,i]=(0,t.useState)("");return(0,r.jsx)("div",{className:"modal-dialog modal-dialog-centered",children:(0,r.jsxs)("div",{className:"modal-content",style:{background:"#fff",zIndex:0},children:[(0,r.jsx)("div",{className:"modal-header",children:(0,r.jsx)("h5",{className:"modal-title",children:"Invite User"})}),(0,r.jsxs)("div",{className:"modal-body",children:[(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"email",className:"form-label",children:"Email"}),(0,r.jsx)("input",{type:"email",className:"form-control",id:"email",placeholder:"Enter Email",value:l,onChange:e=>d(e.target.value)})]}),(0,r.jsxs)("div",{className:"mb-3",children:[(0,r.jsx)("label",{htmlFor:"message",className:"form-label",children:"Invitation Message"}),(0,r.jsx)("textarea",{className:"form-control",id:"message",rows:"3",placeholder:"Enter message",value:n,onChange:e=>i(e.target.value)})]})]}),(0,r.jsxs)("div",{className:"modal-footer",children:[(0,r.jsx)("button",{type:"button",className:"btn btn-link",onClick:s,children:"Close"}),(0,r.jsx)("button",{type:"button",className:"btn btn-primary",onClick:()=>{a({email:l,message:n}),d(""),i(""),s()},children:"Invite"})]})]})})};var g=a(1462),N=a(9804),y=a(4450),f=a(1036);const w=e=>{let{user:s}=e;const a=(0,t.useRef)(null),[d,n]=(0,t.useState)(!1),i=null===s||void 0===s?void 0:s._id;(0,y.j)(a,(()=>n(!1)));const c=(0,l.wA)(),{loading:o,message:m,error:x}=(0,l.d4)((e=>e.request));return(0,t.useEffect)((()=>{x&&(f.oR.error(`Error: ${x}`),c((0,h.x8)())),m&&f.oR.success(m)}),[c,x,m]),(0,r.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-2",children:[(0,r.jsxs)("div",{className:"d-flex align-items-center",children:[(0,r.jsx)("img",{src:s.avatar,alt:`${s.firstName} ${s.lastName}`,className:"rounded-circle",style:{width:"30px",height:"30px",marginRight:"10px"}}),(0,r.jsxs)("p",{className:"mb-0",children:[s.firstName," ",s.lastName]})]}),(0,r.jsxs)("div",{className:"position-relative",ref:a,children:[(0,r.jsx)("button",{className:"btn outline-none border-0",onClick:()=>{n((e=>!e))},type:"button",children:(0,r.jsx)(g.mqA,{})}),d&&(0,r.jsxs)("ul",{className:"custom-dropdown position-absolute bg-white shadow-sm p-2",style:{right:0,zIndex:1e3},children:[(0,r.jsxs)("li",{className:"d-flex justify-content-between",children:[(0,r.jsx)("span",{children:"Share"}),(0,r.jsx)(N.e7V,{})]}),(0,r.jsxs)("li",{className:"d-flex justify-content-between",style:{cursor:"pointer"},onClick:()=>{i&&c((0,h.UP)(i))},children:[(0,r.jsx)("span",{children:"Add"}),(0,r.jsx)(N.PLI,{})]}),(0,r.jsxs)("li",{className:"d-flex justify-content-between",children:[(0,r.jsx)("span",{children:"Remove"}),(0,r.jsx)(N.id1,{})]})]})]})]})};var A=a(9122);const C=e=>{let{chats:s}=e;const[a,d]=(0,t.useState)(!1),[n,i]=(0,t.useState)(""),c=(0,l.wA)(),{users:o,loading:m,error:x}=(0,l.d4)((e=>e.userSearch));(0,t.useEffect)((()=>{setTimeout((()=>{c((0,A.Eq)(n))}),1e3)}),[n,c]);return(0,r.jsxs)("div",{className:"modal-dialog modal-dialog-left",id:"network",children:[(0,r.jsx)("div",{className:"modal-content",children:(0,r.jsxs)("div",{className:"modal-body",children:[(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{className:"d-flex justify-content-between",children:[(0,r.jsx)("p",{className:"fs-5 fw-bold",children:"Network"}),(0,r.jsx)("button",{className:"btn",onClick:()=>{d(!0)},"data-bs-toggle":"tooltip","data-bs-placement":"bottom","data-bs-title":"Add Contact",children:(0,r.jsx)(j.BD8,{className:"fs-3"})})]}),(0,r.jsxs)("div",{className:"input-search d-flex align-items-center",children:[(0,r.jsx)(b.Xj1,{className:"fs-5 me-2"}),(0,r.jsx)("input",{type:"text",placeholder:"Search users...",className:"w-100",value:n,onChange:e=>{i(e.target.value)}})]})]}),(0,r.jsxs)("div",{className:"mt-4 searchlist overflow-y-auto h-100",children:[m&&(0,r.jsx)("p",{children:"Loading..."}),x&&(0,r.jsxs)("p",{className:"text-danger",children:["Error: ",x]}),!m&&!x&&o&&0===o.length&&(0,r.jsx)("p",{children:"No users found."}),o&&o.map((e=>(0,r.jsx)(w,{user:e},e._id)))]})]})}),a&&(0,r.jsx)("div",{className:"modal fade show d-block",tabIndex:"-1",id:"add-modal",children:(0,r.jsx)(v,{onClose:()=>{d(!1)},onInvite:e=>{console.log("User invited:",e),d(!1)}})})]})};var k=a(3538),S=a(2021);const M=e=>{let{chats:s}=e;const a=(0,l.wA)();console.log(s._id);const{id:n}=(0,c.g)();return console.log(n),(0,t.useEffect)((()=>{a((0,A.uf)()),a((0,h.lO)())}),[a]),(0,r.jsx)("div",{className:"modal-dialog modal-dialog-centered",style:{width:"600px"},children:(0,r.jsxs)("div",{className:"modal-content",children:[(0,r.jsxs)("div",{className:"modal-body p-3",children:[(0,r.jsx)("div",{className:"gform",children:(0,r.jsxs)("form",{className:"border border-1 rounded-2 justify-content-between w-100 align-items-center d-flex p-2",children:[(0,r.jsx)("span",{className:"to",children:"TO: "}),(0,r.jsx)("input",{type:"text",className:"w-100 border-0  form-control",placeholder:"Aditya Shivastava"}),(0,r.jsx)(d.Mmj,{className:"fs-4 me-2 text-primary"})]})}),(0,r.jsx)("div",{className:" mt-1 ms-4 ",children:(0,r.jsxs)("p",{className:"fs-5",children:[(0,r.jsx)("span",{className:"border border-2 border-secondary rounded-3 text-primary pb-1 px-2",children:(0,r.jsx)(k.Sy$,{})})," ","Create new Group"]})}),(0,r.jsx)("div",{className:"d-flex flex-wrap gap-1 mx-2",children:[1,2,3,4].map(((e,s)=>(0,r.jsxs)("div",{className:"d-flex align-items-center border border-1 border-secondary p-1 rounded-5",children:[(0,r.jsx)("img",{src:"https://wallpapercave.com/wp/wp4454176.jpg",width:"30",height:"30",className:"rounded-circle",alt:"avatar"}),(0,r.jsxs)("h6",{className:"ms-1  mt-1",style:{fontSize:"14px"},children:["Aditya Shiv ",(0,r.jsx)(j._IM,{className:"text-primary"})," ",(0,r.jsx)(S.j55,{className:""})]})]},s)))})]}),(0,r.jsx)("div",{className:"modal-footer border-0 border-top-0",children:(0,r.jsx)("button",{type:"button",className:"btn btn-primary border-0 btn-sm","data-bs-dismiss":"modal",children:"Next"})})]})})};a(245);var I=a(184),E=a(7196);const q=()=>{const{user:e,loading:s,error:a}=(0,l.d4)((e=>e.user));return s?(0,r.jsx)("p",{children:"Loading..."}):a?(0,r.jsxs)("p",{children:["Error: ",a]}):(0,r.jsx)("div",{className:"modal-dialog modal-dialog-centered",id:"Network",children:(0,r.jsx)("div",{className:"modal-content bg-dark text-white",children:(0,r.jsx)("div",{className:"modal-body",children:(0,r.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[(0,r.jsx)("p",{className:"fs-5 fw-bold text-white mb-3",children:"Your Profile"}),(0,r.jsxs)("div",{className:"d-flex flex-column align-items-center mb-3",children:[(0,r.jsx)("img",{src:e.avatar[0].url,alt:"Avatar",className:"rounded-circle profile-avatar"}),(0,r.jsxs)("div",{className:"text-center mt-3",children:[(0,r.jsx)("p",{className:"mb-1 text-white",style:{fontSize:"0.9rem"},children:e.bio}),(0,r.jsx)("p",{className:"text-secondary text-small text-center",children:"BIO"})]})]}),(0,r.jsxs)("div",{className:"profile-info d-flex flex-column align-items-center",children:[(0,r.jsxs)("div",{className:"profile-info-item mb-2",children:[(0,r.jsxs)("p",{style:{fontSize:"0.9rem"},children:[(0,r.jsx)(E.Y$q,{className:"me-2 "}),e.username]}),(0,r.jsx)("p",{className:"text-secondary text-small text-center",children:"Username"})]}),(0,r.jsxs)("div",{className:"profile-info-item mb-2",children:[(0,r.jsxs)("p",{style:{fontSize:"0.9rem"},children:[(0,r.jsx)(I.K9B,{className:"me-2"}),`${e.firstName} ${e.lastName}`]}),(0,r.jsx)("p",{className:"text-secondary text-small text-center",children:"Name"})]}),(0,r.jsxs)("div",{className:"profile-info-item ",children:[(0,r.jsxs)("p",{style:{fontSize:"0.9rem"},children:[(0,r.jsx)(I.bfZ,{className:"me-2"}),x()(e.createdAt).format("MMMM YYYY")]}),(0,r.jsx)("p",{className:"text-secondary text-small text-center",children:"Joined"})]})]})]})})})})};var _=a(9477);const $=function(){const e=(0,l.wA)(),{chats:s,loading:a,error:i}=(0,l.d4)((e=>e.chat));return(0,_.Y)(),(0,t.useEffect)((()=>{e((0,h.Oz)())}),[e]),(0,r.jsx)("div",{className:"chat-containers-me ",children:(0,r.jsxs)("div",{className:"chat-box",style:{width:"100%"},children:[(0,r.jsxs)("div",{className:"justify-content-between align-items-center d-flex p-2",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)(n.k2,{to:"/",className:" btn btn-light p-1 me-4 rounded-circle",children:(0,r.jsx)("i",{class:"bi bi-arrow-left"})}),(0,r.jsx)("span",{className:"text-left fw-semibold",children:"Messages"})]}),(0,r.jsx)("button",{className:"btn",children:(0,r.jsx)("i",{class:"bi bi-gear-fill"})})]}),(0,r.jsxs)("div",{className:"messages",children:[(0,r.jsxs)("form",{className:"bg-body-secondary border-dark rounded justify-content-between align-items-center d-flex\r rounded-1 p-2 search-form",children:[(0,r.jsx)("input",{type:"text",style:{outline:"none",height:"10px"},className:"w-100 border-0 bg-transparent search-input",placeholder:"Search"}),(0,r.jsx)(d.Mmj,{className:"fs-4 me-2",style:{color:"blue"}})]}),(0,r.jsxs)("div",{className:"justify-content-around align-items-center d-flex mt-3",children:[(0,r.jsx)("div",{class:"modal fade",id:"messageModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,r.jsx)(q,{})}),(0,r.jsx)("button",{className:"btn fw-semibold btn-sm w-25 me-1 msgtoggle","data-bs-toggle":"modal","data-bs-target":"#natwork-modal",children:"Network"}),(0,r.jsx)("button",{className:"btn fw-semibold  btn-sm w-25 me-1 msgtoggle","data-bs-toggle":"modal","data-bs-target":"#groupModal",children:"Group"}),(0,r.jsx)("div",{class:"modal fade",id:"groupModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,r.jsx)(M,{chats:s})}),(0,r.jsx)("button",{className:"btn fw-semibold  btn-sm w-25 me-1 msgtoggle","data-bs-toggle":"modal","data-bs-target":"#requestModal",children:"Request"}),(0,r.jsx)("div",{class:"modal fade",id:"requestModal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,r.jsx)(u,{})}),(0,r.jsx)("div",{class:"modal fade",id:"natwork-modal",tabindex:"-1","aria-labelledby":"exampleModalLabel","aria-hidden":"true",children:(0,r.jsx)(C,{chats:s})})]}),(0,r.jsx)("div",{className:"p-2",children:(0,r.jsx)(o,{chats:s})})]})]})})}},9477:(e,s,a)=>{a.d(s,{F:()=>i,Y:()=>r});var t=a(5043),l=a(5749),d=a(579);const n=(0,t.createContext)(),r=()=>(0,t.useContext)(n),i=e=>{let{children:s}=e;const a=(0,t.useMemo)((()=>(0,l.Ay)("http://localhost:8000",{withCredentials:!0})),[]);return(0,d.jsx)(n.Provider,{value:a,children:s})}}}]);
//# sourceMappingURL=8284.e4672b11.chunk.js.map